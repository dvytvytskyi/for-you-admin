# üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

## ‚úÖ –°—Ç–∞—Ç—É—Å: Backend —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ —Ç–∞ –ø—Ä–∞—Ü—é—î

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å:**
```
[API Auth] ‚úÖ API key found in database
[API Auth] ‚úÖ Authentication successful
```

- ‚úÖ API –∫–ª—é—á –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –ë–î
- ‚úÖ Secret —Å–ø—ñ–≤–ø–∞–¥–∞—î
- ‚úÖ –ö–ª—é—á –∞–∫—Ç–∏–≤–Ω–∏–π
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞

### 2. Endpoints

#### `/api/properties?propertyType=secondary`
- ‚úÖ Middleware –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î
- ‚úÖ Endpoint –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

#### `/api/public/data`
- ‚úÖ Middleware –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ
- ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ properties (–≤–∫–ª—é—á–Ω–æ –∑ secondary)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ meta (totalSecondaryProperties, totalOffPlanProperties)

### 3. –õ–æ–≥—É–≤–∞–Ω–Ω—è

–î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
- `[API Auth]` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `[Properties API]` - –∑–∞–ø–∏—Ç–∏ –¥–æ /api/properties
- `[Public API]` - –∑–∞–ø–∏—Ç–∏ –¥–æ /api/public/data

### 4. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

1. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—é –≤ `properties.routes.ts`
2. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—é –≤ `public.routes.ts`
3. ‚úÖ –î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
4. ‚úÖ –î–æ–¥–∞–Ω–æ trim() –¥–ª—è –∫–ª—é—á—ñ–≤
5. ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

---

## üìù –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –¢–µ—Å—Ç /api/properties
curl -H "x-api-key: ak_aa4d19418b385c370939b45365d0c687ddbdef7cbe9a72548748ef67f5e469e1" \
     -H "x-api-secret: as_623caef2632983630ce11293e544504c834a9ab1015fa2c75a7c2583d6f28d7c" \
     "http://localhost:4000/api/properties?propertyType=secondary&limit=5"

# –¢–µ—Å—Ç /api/public/data
curl -H "x-api-key: ak_aa4d19418b385c370939b45365d0c687ddbdef7cbe9a72548748ef67f5e469e1" \
     -H "x-api-secret: as_623caef2632983630ce11293e544504c834a9ab1015fa2c75a7c2583d6f28d7c" \
     "http://localhost:4000/api/public/data"

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç
./test-api.sh http://localhost:4000
```

---

## üéØ –í–∏—Å–Ω–æ–≤–æ–∫

Backend —Å–µ—Ä–≤–µ—Ä —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –∑ —É—Å—ñ–º–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º–∏:
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î
- ‚úÖ Endpoints –ø—Ä–∞—Ü—é—é—Ç—å
- ‚úÖ Secondary properties –¥–æ—Å—Ç—É–ø–Ω—ñ

**–ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!** üöÄ

